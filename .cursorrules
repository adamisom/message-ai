# MessageAI Project Rules

## Critical Constraints

### Accuracy
- **NEVER** claim "this is how WhatsApp does it" or "this is the approach [app] takes" unless you have verified information
- Don't make up implementation details about how other apps work
- Use phrases like "a common pattern" or "similar to what messaging apps typically do" instead

### Version Control
- All dependency versions are **PINNED** (Expo SDK 54, React 19.1.0, React Native 0.81)
- Do NOT upgrade dependencies without explicit approval
- Check package.json before installing new packages

## Architecture Guidelines

### Navigation
- Use **Expo Router** (file-based routing) - it's already set up
- Don't install React Navigation separately

### State Management
- **Hybrid approach**: Zustand for global state (auth, conversations list), component state for screen-specific data (messages, forms, UI)
- Don't put everything in Zustand

### Firebase
- Always use `firebase.firestore.FieldValue.serverTimestamp()` for timestamps (never client-side `new Date()`)
- Always unsubscribe from Firestore listeners in cleanup functions (common source of memory leaks)

## Documentation

Refer to `/docs/mvp-prd-plus.md` for:
- Complete feature requirements
- Firestore schema
- Implementation details
- Architectural decisions (Section 2: "Key Architectural Decisions")
